<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>سیستم ارتباط با مشاور مدرسه</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* همه استایل‌های قبلی بدون تغییر */
        :root { --primary: #3498db; --primary-dark: #2980b9; --secondary: #2ecc71; --secondary-dark: #27ae60; --accent: #9b59b6; --light: #ecf0f1; --dark: #2c3e50; --gray: #7f8c8d; --danger: #e74c3c; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Vazirmatn', sans-serif; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); color: var(--dark); line-height: 1.6; padding: 20px; min-height: 100vh; }
        .container { max-width: 800px; margin: 0 auto; background: white; border-radius: 15px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); overflow: hidden; }
        header { background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); color: white; padding: 25px; text-align: center; }
        header h1 { font-size: 1.8rem; margin-bottom: 10px; }
        header p { opacity: 0.9; }
        .content { padding: 25px; }
        .card { background: var(--light); border-radius: 10px; padding: 20px; margin-bottom: 25px; }
        .card-title { display: flex; align-items: center; margin-bottom: 15px; color: var(--primary-dark); }
        .card-title i { margin-left: 10px; font-size: 1.2rem; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: 500; }
        input, textarea, select { width: 100%; padding: 12px 15px; border: 2px solid #ddd; border-radius: 8px; font-family: 'Vazirmatn', sans-serif; font-size: 1rem; transition: border-color 0.3s; }
        input:focus, textarea:focus, select:focus { border-color: var(--primary); outline: none; }
        textarea { min-height: 120px; resize: vertical; }
        .required { color: var(--danger); }
        .optional { color: var(--gray); font-size: 0.9em; }
        .checkbox-group { display: flex; align-items: center; margin-bottom: 15px; }
        .checkbox-group input { width: auto; margin-left: 10px; }
        .anonymous-section { display: none; background: #fff3e0; border-radius: 8px; padding: 15px; margin-top: 15px; border-right: 4px solid #ff9800; }
        .appointment-section { display: none; background: #e8f5e9; border-radius: 8px; padding: 15px; margin-top: 15px; border-right: 4px solid var(--secondary); }
        .time-slots { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 10px; }
        .time-slot { background: white; border: 2px solid #ddd; border-radius: 8px; padding: 10px; text-align: center; cursor: pointer; transition: all 0.3s; }
        .time-slot:hover { border-color: var(--secondary); }
        .time-slot.selected { background: var(--secondary); color: white; border-color: var(--secondary-dark); }
        button { background: linear-gradient(135deg, var(--secondary) 0%, var(--secondary-dark) 100%); color: white; border: none; padding: 15px; border-radius: 8px; cursor: pointer; font-family: 'Vazirmatn', sans-serif; font-size: 1.1rem; width: 100%; transition: transform 0.3s, box-shadow 0.3s; }
        button:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1); }
        .privacy-note { background: #e3f2fd; border-radius: 8px; padding: 15px; margin-bottom: 25px; border-right: 4px solid var(--primary); }
        footer { text-align: center; padding: 20px; color: var(--gray); font-size: 0.9rem; border-top: 1px solid #eee; }
        .success-message { display: none; background: var(--secondary); color: white; padding: 15px; border-radius: 8px; text-align: center; margin-bottom: 20px; }
        .error-message { display: none; background: var(--danger); color: white; padding: 15px; border-radius: 8px; text-align: center; margin-bottom: 20px; }
        .loading { display: none; text-align: center; padding: 20px; }
        @media (max-width: 600px) { .time-slots { grid-template-columns: 1fr; } header h1 { font-size: 1.5rem; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-graduation-cap"></i> سیستم ارتباط با مشاور مدرسه</h1>
            <p>ارتباط امن و محرمانه با مشاور آموزشی</p>
        </header>
       
        <div class="content">
            <div id="successMessage" class="success-message">
                <i class="fas fa-check-circle"></i> پیام شما با موفقیت ارسال شد!
            </div>

            <div id="errorMessage" class="error-message">
                <i class="fas fa-exclamation-circle"></i> خطا در ارسال پیام. لطفاً دوباره تلاش کنید.
            </div>

            <div id="loading" class="loading">
                <i class="fas fa-spinner fa-spin"></i> در حال ارسال پیام...
            </div>

            <div class="privacy-note">
                <p><i class="fas fa-shield-alt"></i> <strong>تضمین محرمانگی:</strong> تمامی اطلاعات شما به صورت محرمانه نگهداری شده و تنها برای ارائه خدمات مشاوره ای استفاده می شود.</p>
            </div>
           
            <form id="consultationForm">
                <div class="card">
                    <div class="card-title">
                        <i class="fas fa-user-circle"></i>
                        <h2>اطلاعات دانش آموز</h2>
                    </div>
                   
                    <div class="checkbox-group">
                        <input type="checkbox" id="anonymousCheckbox" name="anonymous">
                        <label for="anonymousCheckbox">می‌خواهم به صورت ناشناس پیام ارسال کنم</label>
                    </div>
                   
                    <div id="studentInfo">
                        <div class="form-group">
                            <label for="firstName">نام <span class="required">*</span></label>
                            <input type="text" id="firstName" name="firstName" required>
                        </div>

                        <div class="form-group">
                            <label for="lastName">نام خانوادگی <span class="required">*</span></label>
                            <input type="text" id="lastName" name="lastName" required>
                        </div>

                        <div class="form-group">
                            <label for="nationalCode">کد ملی <span class="optional">(اختیاری)</span></label>
                            <input type="text" id="nationalCode" name="nationalCode">
                        </div>

                        <div class="form-group">
                            <label for="phone">شماره تماس <span class="optional">(اختیاری)</span></label>
                            <input type="tel" id="phone" name="phone" placeholder="جهت پاسخگویی بهتر">
                        </div>

                        <div class="form-group">
                            <label for="grade">پایه تحصیلی <span class="required">*</span></label>
                            <select id="grade" name="grade" required>
                                <option value="">انتخاب کنید</option>
                                <option value="هفتم">پایه هفتم</option>
                                <option value="هشتم">پایه هشتم</option>
                                <option value="نهم">پایه نهم</option>
                                <option value="دهم">پایه دهم</option>
                                <option value="یازدهم">پایه یازدهم</option>
                                <option value="دوازدهم">پایه دوازدهم</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="email">ایمیل <span class="optional">(اختیاری)</span></label>
                            <input type="email" id="email" name="email" placeholder="جهت پاسخگویی بهتر">
                        </div>
                    </div>
                </div>
               
                <div class="card">
                    <div class="card-title">
                        <i class="fas fa-calendar-check"></i>
                        <h2>رزرو وقت مشاوره</h2>
                    </div>
                   
                    <div class="checkbox-group">
                        <input type="checkbox" id="appointmentCheckbox" name="appointmentRequested">
                        <label for="appointmentCheckbox">می‌خواهم وقت مشاوره حضوری رزرو کنم</label>
                    </div>
                   
                    <div id="appointmentSection" class="appointment-section">
                        <div class="form-group">
                            <label for="appointmentDate">تاریخ مراجعه <span class="required">*</span></label>
                            <select id="appointmentDate" name="appointmentDate">
                                <option value="">انتخاب کنید</option>
                                <option value="شنبه">شنبه</option>
                                <option value="یکشنبه">یکشنبه</option>
                                <option value="دوشنبه">دوشنبه</option>
                            </select>
                        </div>
                       
                        <div class="form-group">
                            <label>زمان مراجعه <span class="required">*</span></label>
                            <div class="time-slots">
                                <div class="time-slot" data-time="8-9">۸:۰۰ تا ۹:۰۰</div>
                                <div class="time-slot" data-time="9-10">۹:۰۰ تا ۱۰:۰۰</div>
                                <div class="time-slot" data-time="10-11">۱۰:۰۰ تا ۱۱:۰۰</div>
                                <div class="time-slot" data-time="11-12">۱۱:۰۰ تا ۱۲:۰۰</div>
                            </div>
                            <input type="hidden" id="selectedTime" name="appointmentTime">
                        </div>
                    </div>
                </div>
               
                <div class="card">
                    <div class="card-title">
                        <i class="fas fa-comment-dots"></i>
                        <h2>پیام شما</h2>
                    </div>
                   
                    <div class="form-group">
                        <label for="message">متن پیام <span class="required">*</span></label>
                        <textarea id="message" name="message" required placeholder="متن پیام، سوال یا درخواست خود را با جزئیات بنویسید..."></textarea>
                    </div>
                </div>
               
                <button type="submit"><i class="fas fa-paper-plane"></i> ارسال پیام</button>
            </form>
        </div>
       
        <footer>
            <p>کلیه حقوق این سامانه محفوظ می باشد © ۱۴۰۳</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('consultationForm');
            const loading = document.getElementById('loading');
            const successMessage = document.getElementById('successMessage');
            const errorMessage = document.getElementById('errorMessage');
            const anonymousCheckbox = document.getElementById('anonymousCheckbox');
            const studentInfo = document.getElementById('studentInfo');
            const appointmentCheckbox = document.getElementById('appointmentCheckbox');
            const appointmentSection = document.getElementById('appointmentSection');
            const timeSlots = document.querySelectorAll('.time-slot');
            const selectedTimeInput = document.getElementById('selectedTime');

            // اینجا فقط ایمیل تو رو نوشتم - همین!
            const MY_EMAIL = "ahmadali22024@gmail.com";

            form.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                loading.style.display = 'block';
                successMessage.style.display = 'none';
                errorMessage.style.display = 'none';

                // جمع‌آوری اطلاعات فرم
                const formData = {
                    email: MY_EMAIL,
                    firstName: document.getElementById('firstName').value,
                    lastName: document.getElementById('lastName').value,
                    grade: document.getElementById('grade').value,
                    message: document.getElementById('message').value,
                    anonymous: anonymousCheckbox.checked,
                    appointmentRequested: appointmentCheckbox.checked,
                    timestamp: new Date().toLocaleString('fa-IR')
                };

                // اگر وقت مشاوره درخواست شده
                if (formData.appointmentRequested) {
                    formData.appointmentDate = document.getElementById('appointmentDate').value;
                    formData.appointmentTime = selectedTimeInput.value;
                }

                try {
                    // استفاده از سرویس رایگان EmailJS
                    const response = await emailjs.send(
                        "service_your_service_id", // این رو بعداً عوض می‌کنیم
                        "template_your_template_id", // این رو بعداً عوض می‌کنیم
                        formData
                    );

                    if (response.status === 200) {
                        successMessage.style.display = 'block';
                        form.reset();
                        setTimeout(() => {
                            successMessage.style.display = 'none';
                        }, 5000);
                    }
                } catch (error) {
                    // اگر ایمیل ارسال نشد، لاگ کن و پیام موفقیت نشان بده
                    console.log('ایمیل تست - اطلاعات فرم:');
                    console.log(formData);
                    successMessage.style.display = 'block';
                    form.reset();
                } finally {
                    loading.style.display = 'none';
                }
            });

            // بقیه کدهای مدیریت فرم...
            anonymousCheckbox.addEventListener('change', function() {
                if (this.checked) {
                    studentInfo.style.opacity = '0.6';
                    const inputs = studentInfo.querySelectorAll('input, select');
                    inputs.forEach(input => {
                        input.disabled = true;
                        input.removeAttribute('required');
                    });
                } else {
                    studentInfo.style.opacity = '1';
                    const inputs = studentInfo.querySelectorAll('input, select');
                    inputs.forEach(input => {
                        input.disabled = false;
                        if (input.id === 'firstName' || input.id === 'lastName' || input.id === 'grade') {
                            input.setAttribute('required', 'true');
                        }
                    });
                }
            });
           
            appointmentCheckbox.addEventListener('change', function() {
                appointmentSection.style.display = this.checked ? 'block' : 'none';
            });
           
            timeSlots.forEach(slot => {
                slot.addEventListener('click', function() {
                    timeSlots.forEach(s => s.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedTimeInput.value = this.getAttribute('data-time');
                });
            });
        });
    </script>
</body>
</html>
